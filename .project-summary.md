# ğŸ“ Estrutura Completa do Projeto

```
projeto-tese/
â”‚
â”œâ”€â”€ ğŸ“„ package.json              # DependÃªncias e scripts
â”œâ”€â”€ ğŸ“„ tsconfig.json             # Config TypeScript
â”œâ”€â”€ ğŸ“„ next.config.js            # Config Next.js
â”œâ”€â”€ ğŸ“„ tailwind.config.ts        # Config Tailwind CSS
â”œâ”€â”€ ğŸ“„ postcss.config.mjs        # Config PostCSS
â”œâ”€â”€ ğŸ“„ .gitignore                # Git ignore
â”œâ”€â”€ ğŸ“„ .env.local.example        # Template de variÃ¡veis
â”‚
â”œâ”€â”€ ğŸ“„ README.md                 # DocumentaÃ§Ã£o principal
â”œâ”€â”€ ğŸ“„ QUICKSTART.md             # Guia de inÃ­cio rÃ¡pido
â”œâ”€â”€ ğŸ“„ ARCHITECTURE.md           # Arquitetura tÃ©cnica
â”‚
â”œâ”€â”€ ğŸ“‚ app/                      # Next.js App Router
â”‚   â”œâ”€â”€ ğŸ“„ layout.tsx            # Layout raiz (header + nav)
â”‚   â”œâ”€â”€ ğŸ“„ page.tsx              # Dashboard (/)
â”‚   â”œâ”€â”€ ğŸ“„ globals.css           # Estilos globais
â”‚   â”‚
â”‚   â”œâ”€â”€ ğŸ“‚ documents/
â”‚   â”‚   â””â”€â”€ ğŸ“‚ [id]/
â”‚   â”‚       â””â”€â”€ ğŸ“„ page.tsx      # Chat sobre documento
â”‚   â”‚
â”‚   â”œâ”€â”€ ğŸ“‚ settings/
â”‚   â”‚   â””â”€â”€ ğŸ“„ page.tsx          # ConfiguraÃ§Ãµes
â”‚   â”‚
â”‚   â””â”€â”€ ğŸ“‚ api/                  # API Routes
â”‚       â”œâ”€â”€ ğŸ“‚ upload/
â”‚       â”‚   â””â”€â”€ ğŸ“„ route.ts      # POST /api/upload
â”‚       â”œâ”€â”€ ğŸ“‚ ingest/
â”‚       â”‚   â””â”€â”€ ğŸ“„ route.ts      # POST /api/ingest
â”‚       â”œâ”€â”€ ğŸ“‚ chat/
â”‚       â”‚   â””â”€â”€ ğŸ“„ route.ts      # POST /api/chat
â”‚       â”œâ”€â”€ ğŸ“‚ export/
â”‚       â”‚   â””â”€â”€ ğŸ“„ route.ts      # POST /api/export
â”‚       â”œâ”€â”€ ğŸ“‚ documents/
â”‚       â”‚   â”œâ”€â”€ ğŸ“„ route.ts      # GET /api/documents
â”‚       â”‚   â””â”€â”€ ğŸ“‚ [id]/
â”‚       â”‚       â””â”€â”€ ğŸ“„ route.ts  # GET /api/documents/:id
â”‚       â””â”€â”€ ğŸ“‚ settings/
â”‚           â”œâ”€â”€ ğŸ“„ route.ts      # GET/POST /api/settings
â”‚           â””â”€â”€ ğŸ“‚ test/
â”‚               â””â”€â”€ ğŸ“„ route.ts  # POST /api/settings/test
â”‚
â”œâ”€â”€ ğŸ“‚ components/               # React Components
â”‚   â”œâ”€â”€ ğŸ“„ upload-dialog.tsx    # Modal de upload
â”‚   â”œâ”€â”€ ğŸ“„ answer-compare-grid.tsx  # Grid de comparaÃ§Ã£o
â”‚   â”‚
â”‚   â””â”€â”€ ğŸ“‚ ui/                   # shadcn/ui components
â”‚       â”œâ”€â”€ ğŸ“„ button.tsx
â”‚       â”œâ”€â”€ ğŸ“„ card.tsx
â”‚       â”œâ”€â”€ ğŸ“„ input.tsx
â”‚       â”œâ”€â”€ ğŸ“„ label.tsx
â”‚       â”œâ”€â”€ ğŸ“„ textarea.tsx
â”‚       â”œâ”€â”€ ğŸ“„ select.tsx
â”‚       â”œâ”€â”€ ğŸ“„ tabs.tsx
â”‚       â”œâ”€â”€ ğŸ“„ badge.tsx
â”‚       â””â”€â”€ ğŸ“„ dialog.tsx
â”‚
â””â”€â”€ ğŸ“‚ lib/                      # Business Logic
    â”œâ”€â”€ ğŸ“„ utils.ts              # Utilidades (cn)
    â”œâ”€â”€ ğŸ“„ state.ts              # Estado em memÃ³ria (singleton)
    â”œâ”€â”€ ğŸ“„ parsers.ts            # Parsers (PDF/DOCX/TXT)
    â”œâ”€â”€ ğŸ“„ chunking.ts           # Text chunking
    â”‚
    â””â”€â”€ ğŸ“‚ ai/                   # IntegraÃ§Ãµes com IAs
        â”œâ”€â”€ ğŸ“„ types.ts          # TypeScript types
        â”œâ”€â”€ ğŸ“„ prompts.ts        # Prompt engineering
        â”œâ”€â”€ ğŸ“„ executor.ts       # Orquestrador
        â”œâ”€â”€ ğŸ“„ openai.ts         # OpenAI integration
        â”œâ”€â”€ ğŸ“„ gemini.ts         # Gemini integration
        â””â”€â”€ ğŸ“„ grok.ts           # Grok integration
```

## ğŸ¯ Arquivos Chave

### Backend Core
- **lib/state.ts**: Estado em memÃ³ria (docs + settings)
- **lib/parsers.ts**: Parsing de PDF/DOCX/TXT
- **lib/chunking.ts**: Chunking com overlap
- **lib/ai/executor.ts**: ExecuÃ§Ã£o paralela de IAs

### API Routes
- **app/api/upload/route.ts**: Recebe arquivo multipart
- **app/api/ingest/route.ts**: Processa e indexa documento
- **app/api/chat/route.ts**: RAG query com IA(s)
- **app/api/export/route.ts**: Gera DOCX

### Frontend Pages
- **app/page.tsx**: Dashboard com lista de docs
- **app/documents/[id]/page.tsx**: Interface de chat
- **app/settings/page.tsx**: Config de chaves

### Components
- **components/upload-dialog.tsx**: Modal de upload
- **components/answer-compare-grid.tsx**: ComparaÃ§Ã£o lado-a-lado

## ğŸ“Š Linhas de CÃ³digo

| Categoria | Arquivos | ~LOC |
|-----------|----------|------|
| Backend (API) | 8 | ~800 |
| Frontend (Pages) | 3 | ~500 |
| Components | 11 | ~600 |
| Lib (Core) | 9 | ~700 |
| Config | 5 | ~100 |
| **Total** | **36** | **~2700** |

## ğŸ”„ Fluxo de ExecuÃ§Ã£o

### 1. InicializaÃ§Ã£o
```
npm run dev
  â†’ Next.js starts
  â†’ lib/state.ts singleton init
  â†’ Server ready on :3000
```

### 2. Upload de Documento
```
User clicks "Novo Upload"
  â†’ components/upload-dialog.tsx opens
  â†’ POST /api/upload (formData)
  â†’ Save file to /tmp/uploads/{uuid}.{ext}
  â†’ POST /api/ingest
    â†’ lib/parsers.ts (PDF/DOCX/TXT)
    â†’ lib/chunking.ts (split + overlap)
    â†’ lib/state.ts (buildIndex via elasticlunr)
    â†’ Store in state.docs[id]
  â†’ Return to dashboard
```

### 3. Chat sobre Documento
```
User opens document
  â†’ app/documents/[id]/page.tsx
  â†’ Input question
  â†’ Select provider/model (or "Run All 3")
  â†’ POST /api/chat
    â†’ lib/state.ts (searchIndex â†’ top 8 chunks)
    â†’ lib/ai/prompts.ts (build system + user prompts)
    â†’ lib/ai/executor.ts (executeMultipleAI)
      â†’ Promise.all([
          lib/ai/openai.ts,
          lib/ai/gemini.ts,
          lib/ai/grok.ts
        ])
    â†’ Extract citations
    â†’ Calculate metrics (latency, tokens, cost)
  â†’ components/answer-compare-grid.tsx
    â†’ Display answers side-by-side
```

### 4. Exportar DOCX
```
User clicks "Exportar DOCX"
  â†’ POST /api/export
    â†’ lib docx package
    â†’ Create Document with footnotes
  â†’ Download .docx file
```

## ğŸ¨ Stack TecnolÃ³gico

### Framework
- Next.js 15 (App Router)
- React 18
- TypeScript 5

### Styling
- Tailwind CSS 3.4
- shadcn/ui (Radix UI)
- lucide-react (icons)

### Backend
- Node.js 18+
- API Routes (Next.js)

### AI Integration
- `openai` (SDK oficial)
- `@google/generative-ai` (Gemini)
- `fetch` API (Grok/xAI)

### Document Processing
- `pdf-parse` (PDF)
- `mammoth` (DOCX)
- `fs` (TXT)
- `elasticlunr` (BM25 search)

### Export
- `docx` (DOCX generation)

### Utils
- `formidable` (multipart uploads)
- `sonner` (toast notifications)
- `react-markdown` (markdown rendering)

## ğŸš€ Comandos NPM

```bash
# Desenvolvimento
npm run dev          # Inicia dev server (:3000)

# ProduÃ§Ã£o
npm run build        # Build otimizado
npm start            # Serve produÃ§Ã£o

# Quality
npm run lint         # ESLint check
```

## ğŸ“¦ Deploy (Futuro)

### OpÃ§Ãµes
1. **Vercel** (recomendado)
   - `vercel deploy`
   - Precisa adicionar persistÃªncia (Supabase)

2. **Docker**
   - Criar Dockerfile
   - `docker build -t autoria-mvp .`

3. **VPS**
   - PM2 para gerenciamento
   - Nginx como reverse proxy

### PrÃ©-requisitos
- âœ… Adicionar banco de dados
- âœ… Criptografar chaves
- âœ… Implementar autenticaÃ§Ã£o
- âœ… Rate limiting
- âœ… HTTPS

## ğŸ¯ Status do Projeto

âœ… MVP Funcional
- Upload de docs
- Chat RAG
- Multi-IA compare
- CitaÃ§Ãµes
- MÃ©tricas
- Export DOCX

âš ï¸ LimitaÃ§Ãµes Conhecidas
- Sem persistÃªncia
- Sem seguranÃ§a
- Sem escalabilidade

ğŸ”® PrÃ³ximos Passos
- SQLite local
- Supabase + Auth
- Vector search
- Streaming responses
- Melhor chunking

---

**Total:** 36 arquivos, ~2700 linhas de cÃ³digo
**Tecnologias:** 15+
**Tempo estimado de desenvolvimento:** 6-8 horas
**Status:** âœ… Pronto para testes locais
